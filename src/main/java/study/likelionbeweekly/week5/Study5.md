# 5주차 - 나만의 DB 만들기

# 정규화(Nomalization)란?
이상현상이 있는 관계를 분해하여 이상현상을 없애는 과정이다.
정규화를 통해서 무결성을 유지할 수 있으며, DB의 저장 용량 역시 줄일 수 있다.

> **이상현상(Anomally)이란?**
>>데이터베이스를 잘못 설계하여 불필요한 데이터 중복(Redeundandy)으로 인한
공간 낭비 및 부작용을 뜻한다. 
> 
>>삽입이상, 삭제이상, 갱신이상이 있다.

# 정규화의 종류
정규화의 종류에는 여러 가지가 있지만 4가지만 알아볼 것이다.

1. 1NF : 제 1 정규화
2. 2NF : 제 2 정규화
3. 3NF : 제 3 정규화
4. BCNF

## 1NF란?
테이블의 컬럼이 원자값만 갖도록 테이블을 분해하는 것이다.

## 2NF란?
제 1 정규화를 진행한 테이블의 모든 컬럼에 대해 
완전 함수 종속을 만족하도록 테이블을 분해하고,
부분적 종속이 없도록 만드는 것이다.

| 완전 함수 종속이란?
기본키의 부분 집합이 결정자가 되어서는 안된다는 것을 의미한다.

| 부분적 종속이란?
기본키 중에 특정 컬럼에만 종속된 컬럼이 없어야 한다는 것을 의미한다.

## 3NF란?
제 2 정규화를 진행한 테이블에 대해
이행적 종속을 없애도록 테이블을 분해하는 것이다.

> 이행적 종속이란?
>> A->B, B->C가 성립하면, A->C도 성립되는 것을 의미한다.

## BCNF란?
제 3 정규화를 강화한 버전으로 
이전까지는 해결할 수 없는 이상현상을 해결할 수 있다.

제 3 정규화를 만족하면서 모든 결정자가 후보키 집합에 속한 정규형이다.

일반 컬럼이 후보키를 결정하는 경우는
제 3 정규화를 만족하지만 BCNF는 만족하지 않는 예외 경우이다.

# 반정규화(De-Nomalization)란?
성능 향상을 위해 정규화된 데이터 모델에서 중복, 통합, 분리 등을 수행하는
모든 과정을 의미한다.

조회 속도를 향상시키지만, 데이터 모델의 유연성은 낮아진다.

반정규화는 컬럼을 추가하거나 테이블 분할 또는 통합으로 수행할 수 있다.

# 외래키(Foreign key:FK)란?
외래키는 데이터가 일관될 수 있도록 돕는 역할을 한다.

- 외래키는 한 테이블의 필드로, 다른 테이블의 기본키를 나타낸다.
- 외래키가 포함된 테이블을 자식 테이블이라고 하고,
    외래키 값을 제공하는 테이블을 부모 테이블이라고 한다.
- 외래키 값은 NULL이거나 부모 테이블의 기본키 값과 동일해야 한다.
- 외래키로 지정할 두 테이블의 필드는 같은 데이터 타입이어야 한다.

`Members` 테이블의 기본키인 `user_id`와 `Posts` 테이블의 `user_id`를 매핑
```sql
    // Members 테이블의 기본키인 `user_id`와 Posts의 테이블의 `user_id`를 매핑
    foreign key(user_id) references Members(user_id)
```
# 연관 관계란?
객체의 참조와 테이블의 외래키를 매핑하는 것이다.

> 연관 관계에서 고려할 점
> 
> **1. 방향**
>> 단방향, 양방향이 있다.
>
> **2. 다중성**
>> 일대일, 일대다, 다대일, 다대다
> 
> **3. 연관 관계의 주인**
>> 외래키를 관리할 주인 엔티티

# CRUD
데이터베이스의 4대 기본 요소이다.

> **Create**
> > 새로운 데이터를 생성한다.
>
> > SQL의 Insert와 동일한 기능이다.
>
> **Read**
> > 데이터를 조회한다.
>
> > SQL의 Select와 동일한 기능이다.
>
> **Update**
> > 기존 데이터를 수정한다.
>
> > SQL의 Update와 동일한 기능이다.
>
> **Delete**
> > 데이터를 삭제한다.
>
>  > SQL의 Delete와 동일한 기능이다.

# 조인(Join)이란?
관계형 데이터베이스에서는 `join` 연산자를 이용해
관련있는 컬럼을 기준으로 테이블을 합쳐주는 연산이다.

데이터 조회 시, 다른 테이블의 데이터를 함께 조회해야 할 때 이용한다.

> `INNER JOIN`(내부 조인)
>
> 가장 많이 사용되는 조인 구문 중 하나
>
> 테이블 데이터 간 **교집합**을 의미한다.
>
> 결합할 때 `ON` 이하에 조건을 명시하면 된다.
>
> 명시적 표현과 암묵적 표현이 있다.

> `OUTER JOIN`(외부 조인)
>
> 외부 조인은 조건문에 만족하지 않는 행도 표시한다.
>
> > `LEFT JOIN`
>>
>> 왼쪽 테이블을 기준으로 테이블 A의 모든 데이터와 테이블 B와 매칭이 되는 레코드를 포함하는 조인이다.
>
> > `RIGHT JOIN`
> >
>> 오른쪽 테이블을 기준으로 테이블 B의 모든 데이터와 테이블 A와 매칭이 되는 레코드를 포함하는 조인이다.
>
> > `FULL JOIN`
>>
>> MYSQL에서는 지원하지 않기 때문에 LEFT JOIN과 OUTNER JOIN 결과를 합하여 FULL JOIN을 얻을 수 있다.

[실습 과제] (https://euneng356.notion.site/5-3cfee15c64064a37b96f9a50ace23dde?pvs=4)