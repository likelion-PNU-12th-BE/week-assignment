# 2주차 - 스프링 입문
# 프레임워크 vs 라이브러리
### 프레임워크란?

개발자가 소프트웨어를 개발함에 있어서 코드를 구현하는 개발 시간을 줄이고, 코드의 재사용성을 증가 시키기 위해 일련의 클래스 묶음이나 뼈대, 틀을 라이브러리 형태로 제공되는 것을 말한다. 
제어의 역전 개념이 적용된 대표적인 기술이다. 프레임워크와 라이브러리의 가장 큰 차이점이다. 

**프레임워크의 특징**

- 개발자가 따라야 하는 가이드를 제공한다.
- 개발할 수 있는 범위가 정해져 있다.
- 개발자를 위한 다양한 도구, 플러그인들을 지원한다.

**프레임워크의 장점**

- 개발 시간을 줄일 수 있다.
- 정형화되어 있어 일정 수준 이상의 품질을 기대할 수 있다.
- 유지 보수가 쉽다.

개발자들은 항상 문법, 변수선언, 가비지컬렉션, 예외처리 등과 같은 요소들을 항상 신경 써야 하는데 프레임워크를 사용함으로써 소프트웨어 개발의 전체 프로세스를 제어할 수도 있고 일부만 제어해도 개발이 되는 혜택을 가진다. 

### 라이브러리

컴퓨터 프로그램에서 빈번하게 사용되는 사전 컴파일된 루틴 또는 리소스(클래스, 템플릿, 설정 데이터 등)을 모아둔 것이다. 
태스크를 실행해야 할 때마다 이 기능에 대한 코드를 작성하는 대신, 태스크를 수행할 때마다 루틴이 사용된다. 리소스가 필요한 경우 프로그램은 해당 리소스에 대한 라이브러리를 호출한다. 예시로 system.out.println() 이런 함수들이 저장되어 있다.
라이브러리의 장점, 사용하는 이유

- 라이브러리를 사용하면 전반적으로 새로운 애플리케이션 효율을 증대시켜 준다.
- 모든 기능을 직접 코딩하지 않고 사용할 수 있다.
- 시간을 절약할 수 있다.

> **프레임워크와 라이브러리의 차이점**
프레임워크와 라이브러리의 차이는 제어의 흐름에 대한 주도권이 누구에게, 어디에게 있는가 이다.

프레임워크는 자체에 제어 흐름의 주도성이 있다. 
라이브러리는 개발자가 제어권을 가지고 있다

프레임워크는 라이브러리를 포함한 코드의 집합이고, 간단하게 라이브러리들의 모음이다.

---

## 스프링 프레임워크 알아보기

**스프링 프레임워크란?**

자바 플랫폼을 위한 오픈소스 애플리케이션 프레임워크이다. 스프링이라고도 불린다. 동적인 웹 사이트를 개발하기 위해 여러 가지 서비스를 제공한다. 

엔터프라이즈급 애플리케이션을 개발하기 위한 모든 기능을 종합적으로 제공하는 경량화된 솔루션이다. 엔터프라이즈급 개발이라는 것은 대규모 데이터 처리와 트랜잭션이 동시에 여러 사용자로부터 행해지는 매우 큰 규모의 환경을 엔터프라이즈 환경이라고 한다. 

스프링 프레임워크는 경량 컨테이너로 자바 객체를 담고 직접 관리한다. 객체의 생성 및 소멸 그리고 라이프 사이클을 관리하며 언제든 스프링 컨테이너로부터 필요한 객체를 가져와 사용할 수 있다. 이것은 스프링이 IoC 기반의 프레임워크임을 의미한다.

**스프링 프레임워크의 특징**

POJO(Plain Old Java Object)

    이전 EJB(Enterprise JavaBeans)는 확장 가능한 재사용이 가능한 로직을 개발하기 위해 사용되었었는데 한 가지 기능을 위해 불필요한 로직이 과도하게 들어간다는 단점이 있었다. 

    그래서 POJO가 주목을 받았다. POJO는 getter과 setter을 가진 단순 자바 객체로 정의를 하고 있다. 이런 단순 오브젝트는 의존성이 없고 추후 테스트 및 유지 보수가 편리한 유연성의 장점을 가진다. 

    이러한 장점들로 인해 객체 지향적인 다양한 설계와 구현이 가능해지고 POJO 기반의 프레임워크가 조명을 받고 있다. 

AOP(Aspect Oriented Programming)

    관점 지향 프로그래밍이다. 대부분의 소프트웨어 개발 프로세스는 OOP(Object Oriented Programming)이다. 
    
    OOP는 객체지향형 프로그래밍으로 관심사가 같은 데이터를 한 곳에 모아 분리하고 낮은 결합도를 갖게 하여 독립적이고 유연한 모듈로 캡슐화를 하는 것을 일컫는다. 
    
    하지만 이 과정에서 중복되는 코드들이 많아지고 가독성, 확장성, 유지보수성을 떨어뜨리기 때문에 AOP를 통해 이러한 문제들을 해결할 수 있다.
    
    AOP에서는 무분별하게 중복되는 코드를 한 곳에 모아 공통기능을 만들어서 중복되는 코드를 제거할 수 있고, 
    
    공통기능은 한 곳에 모아 하나의 수정으로 모든 핵심 기능들의 공통 기능을 수정할 수 있어 효율적인 유지보수가 가능해지고 재활용성이 극대화된다.
    
MVC(Model View Controller)

    사용자 인터페이스와 비즈니스 로직을 분리하여 개발하는 것이다. Model1과 Model2로 나누어져 있고 일반적인 MVC는 Model2를 지칭한다.
    
    Model 에서는 데이터 처리를 담당한다. Service 영역과 DAO 영역으로 나누어지게 된다. 
    
    Service 영역은 불필요하게 HTTP 통신을 하지 않아야 하고, 요청이나 응답과 같은 객체를 매개변수로 받으면 안된다. 또 Service는 view에 종속적인 코드가 있으면 안된다. View 부분이 변경되더라고 Service 부분은 그대로 재사용할 수 있어야 한다.
    
    View 는 사용자 인터페이스를 담당하며 사용자에게 보여지는 부분이다. view는 controller를 통해 모델에 데이터에 대한 시각화를 담당하며 view는 자신이 요청을 보낼 controller의 정보만 알고 있어야 하는 것이 핵심이다.
    
    Controller에서는 View에 받은 요청을 가공하여 Model에 전달한다. 또한 Model로부터 받은 결과를 View에 넘겨주는 역할을 한다. 모든 요청 에러와 모델 에러를 처리하며 View와 Controller에 정보를 알고 있어야 한다. 요청을 처리하고 응답을 주는 역할을 한다.
    
    이렇게 세 부분으로 나누는 이유는 소스를 분리함으로써 각 소스의 목적이 명확해지고 유지 보수를 하는 데 있어 용이하기 때문이다. 모듈화를 통해 재사용이 가능해야 한다. 

> ☝ [스프링 특징 요약]

- 경량 컨테이너

- 제어의 역전

- 의존성 주입

- 관점 지향 프로그래밍

- 컨테이너

- 트랜잭션 관리 프레임워크

- MVC 패턴

- 배치 프레임워크
    
---
# 스프링 빈, 스프링 컨테이너

**스프링 컨테이너**

스프링 컨테이너는 스프링에서 자바 객체들을 관리하는 공간을 말한다. ApplicationContext를 스프링 컨테이너라고 한다.

자바 객체를 스프링에서는 빈(Bean)이라고 하는데, 스프링 컨테이너에서는 이 빈의 생성부터 소멸까지를 개발자 대신 관리해주는 곳이라고 할 수 있다.

조금 더 자세히 기존에는 개발자가 AppConfig를 사용해 직접 객체를 생성해서 DI(의존성 주입) 했지만, 스프링 컨테이너를 사용하면 스프링 컨테니어가 이 역할을 대신해준다.

스프링 컨테이너는 @Configuration이 붙은 AppConfig를 설정 정보로 사용한다. 이때 이 안에서 @Bean이라는 어노테이션이 붙은 메서드를 모두 호출해서 반환된 객체를 모두 스프링 컨테이너에 등록한다.

- 어노테이션 : 다른 프로그램에게 유용한 정보를 제공하기 위해 사용되는 것으로 주석과 같은 의미를 가진다. 컴파일러에게 문법 에러를 체크하도록 하거나 런타임에 특정 기능을 실행하도록 정보를 제공한다.

이렇게 스프링 컨테이너에 등록된 객체를 스프링 빈이라고 한다.

스프링 컨테이너를 사용하게 되면 기존의 AppConfig를 사용한 조회와 다르게 스프링 컨테이너를 통해서 필요한 스프링 빈을 찾도록 바꿔야 한다.

- AppConfig : 애플리케이션의 전체 구성을 책임진다. AppConfig를 통해 생성자 주입을 하게 된다.

필요한 스프링 빈은 ApplicationContext.getBean() 메서드를 사용해서 찾을 수 있다.

스프링 컨테이너는 2가지로 구분되는데 ApplicationContext와 BeanFactory이다. 그러나 BeanFactory를 직접 사용하는 경우가 거의 없기 때문에 일반적으로는 ApplicationContext를 스프링 컨테이너라고 한다.

**스프링 빈**

스프링은 보통의 경우 스프링 컨테이너에 빈 인스턴스를 단 한 개만 저장하는 싱글톤 방식을 채택하고 있다. 빈 이름은 항상 다르게 지정되어야 한다. 그렇지 않으면 다른 빈이 무시되거나 기존 빈을 덮어버리는 등 설정에 따라 에러가 발생할 수 있다.

- 싱글톤 패턴 : 생성자가 여러 차례 호출되더라도 실제로 생성되는 객체는 하나이다. 생성자를 통해서 여러 번 호출되더라도 인스턴스를 새로 생성하지 않고 최초 호출 시에 만들었던 인스턴스를 재활용하는 패턴이다.

- 싱글톤 패턴 사용하는 이유는 메모리 낭비를 방지하기 위해서이다. 최초 한 번으로 객체를 생성하고 해당 객체를 공유하면 메모리 낭비를 방지할 수 있다. 그러나 단점으로는 의존성이 높아진다는 문제점이 있다. 싱글톤의 인스턴스가 변경되면 해당 인스턴스를 참조하는 모든 클래스를 수정해야 한다.

스프링 빈을 등록하는 방법은 2가지가 있다.

- 컴포넌트 스캔 : 메서드의 이름을 기본 값으로 사용하는 것
- 스프링 빈 직접 등록

빈 저장소에는 빈 이름과 빈 객체의 key, value 쌍으로 저장된다.

**빈 메서드**

메서드 사용 방법은 ApplicationContext.메서드명 형태로 사용한다.
- **getBeanDefinitionNames()**
  - 스프링에 등록된 모든 빈 이름을 조회한다.
- **getBean()**
  - 특정 스프링 빈을 조회하는데 사용된다. 매개변수로 여러 종류가 사용될 수 있다.
  - class타입 / 빈 이름, 클래스 타입 / 빈 이름
- **BeanDefinition.getRole()**
  - 빈의 역할을 출력한다.
- **getBeansOfType()**
  - 해당 타입에 해당하는 모든 빈을 조회할 수 있다.

---

# 스프링 의존 주입(DI)

스프링 프레임워크는 3가지 핵심 프로그래밍 모델을 지원하는데 그 중 하나가 의존성 주입이고, 의존 관계 주입으로도 불린다. 

의존성이란 객체를 생성 및 사용함에 있어서 의존 관계가 있는 것을 말한다. 

**의존성 주입**은 외부에서 객체 간의 의존성을 결정해 주는데, 즉 객체를 직접 생성하는 것이 아니라 외부에서 생성 후 주입시켜 주는 방식이다. 의존성 주입을 이용하면 객체 간의 관계를 동적으로 주입하여 유연성을 확보하고 결합도를 낮출 수 있다.

스프링에서 의존성 주입을 하는 방법

- **생성자 주입**(Construct Injection)
    - 가장 권장되는 의존성 주입 방식이다.
    - @Autowired를 생략하는 방법을 주로 사용한다.
    - Lombok 라이브러리를 사용하면 생성자를 생략 가능해서 코드가 깔끔해진다.
    - final 키워드를 유일하게 사용할 수 있다. final 키워드를 사용해서 값이 한번 할당되면 변경이 불가능해 객체의 불변성이 보장된다.
    - 초기에 할당되기에 NPE가 절대 발생하지 않는다.
    - 생성자를 매번 만들어야 해서 귀찮고, 코드가 길어질 수 있다.
- **필드 주입**
    - Bean으로 등록된 객체를 사용하고자 하는 클래스에 Field로 선언한 뒤 @Autowired를 붙여주면 자동으로 의존 관계가 주입된다.
    - @Autowired 어노테이션을 사용해서 객체 내 필드에 선언해서 주입하는 방법이다.
    - 간단하지만 참조 관계를 눈으로 확인하기 어렵고 순환참조를 막을 수 없다.
- **Setter 주입**
    - @Autowired 어노테이션을 사용해서 Setter 메서드를 통해 주입하는 방법이다.
    - NPE(Null Pointer Exception)이 발생할 수 있다.
- NPE(Null Point Exception) : 대부분 객체가 제대로 생성되지 않은 경우이다. VM에서 해당하는 주소를 찾았을 때 아무 값도 없다는 것이다.
---
# 제어의 역전 IoC

- **제어의 역전(IoC)이란?** 
소프트웨어 설계 원칙 중 하나로, 클래스 간의 상호 의존성을 최소로 가져야 하는 것이다. 프로그래밍에 있어 객체의 생성 및 관리 책임을 개발자에서 전체 애플리케이션 또는 프레임워크에 위임하는 디자인 원칙을 일컫는다.

    제어의 역전에도 장단점이 있다.

    **장점**

    - 애플리케이션 코드의 양을 줄일 수 있다.
    - 코드의 유연성과 재사용성이 증가한다. 
      - IoC 컨테이너를 사용하면 의존성을 관리하기 쉬워져 코드 변경이 쉬워진다.
      - 테스트의 용이성이 증가된다.
    - 의존성 주입을 통해 테스트용 객체를 쉽게 만들 수 있으므로 테스트 코드를 작성하는 데 있어서도 도움이 된다.
    - 결합도가 낮아져 유지보수가 용이해진다.
      - 의존성을 관리하는 작업이 자동화되어 객체 간의 결합도가 낮아져 유지보수가 용이해진다.
    - 객체간의 의존성 관리를 통해 개발 시간을 단축시킬 수 있다.
   
    단점
     
    - 의존성 주입이 많아질수록 코드의 가독성이 떨어질 수 있다. 코드의 복잡성이 증가할 수 있다.
    - IoC 컨테이너가 복잡해질수록 초기 설정과 성능 이슈가 발생할 수 있다.
    - IoC 컨테이너를 사용하면 일부 개발자는 어떤 객체가 어떻게 생성되는 지에 대한 이해를 잃을 수 있다.
   
    IoC는 프레임워크의 중요한 특징 중 하나지만, 모든 프레임워크가 반드시 제어의 역전을 지원해야 하는 것은 아니다. IoC를 지원하지 않더라도 다른 기능들로 인해 프레임워크로 분류될 수 있다.
- 